import{f as l}from"./chunk-N63SZ2MC.js";import{b as n}from"./chunk-QIMRRRQA.js";import{Q as a,V as i}from"./chunk-73DFFZXF.js";var s=class o{constructor(t,e){this.router=t;this.http=e}tokenKey="authToken";auxIdKey="auxId";roleKey="role";login(t,e){let r={aux_num_trabajador:t,aux_password:e};return this.http.post("http://127.0.0.1:8000/api/login",r,{headers:{"Content-type":"application/json"}})}setAuthData(t){let{token:e,userId:r,roles:g}=t;this.setToken(e),this.setAuxiliarId(r),this.setRole(g)}getToken(){return localStorage.getItem(this.tokenKey)}setToken(t){localStorage.setItem(this.tokenKey,t)}isAuthenticated(){return this.getToken()!==null}logout(){localStorage.removeItem(this.auxIdKey),localStorage.removeItem(this.roleKey),localStorage.removeItem(this.tokenKey),this.router.navigate(["/login"])}setAuxiliarId(t){localStorage.setItem(this.auxIdKey,t)}getAuxiliarId(){return localStorage.getItem(this.auxIdKey)}setRole(t){console.log("Setting role:",t),localStorage.setItem(this.roleKey,t)}getRole(){return localStorage.getItem(this.roleKey)}isAdmin(){return this.getRole()==="ROLE_ADMIN"}static \u0275fac=function(e){return new(e||o)(i(l),i(n))};static \u0275prov=a({token:o,factory:o.\u0275fac})};export{s as a};
